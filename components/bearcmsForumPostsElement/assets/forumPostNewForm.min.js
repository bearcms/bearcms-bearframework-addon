/*
 * Bear CMS addon for Bear Framework
 * https://bearcms.com/
 * Copyright (c) 2016 Amplilabs Ltd.
 * Free to use under the MIT license.
 */
var bearCMS=bearCMS||{};
bearCMS.forumPostNewForm=function(){return{onBeforeSubmitForm:function(a){if("undefined"!==typeof ivoPetkov.bearFrameworkAddons&&"undefined"!==typeof ivoPetkov.bearFrameworkAddons.users){var b=ivoPetkov.bearFrameworkAddons.users;b.currentUser.exists()||(b.showLogin(),a.preventDefault())}},onSubmitFormDone:function(a){var b=a.target;a=a.result;"undefined"!==typeof a.success&&b.reset();"undefined"!==typeof a.redirectUrl&&(window.location=a.redirectUrl)},onFormRequestSent:function(a){a=a.target;a.querySelector(".bearcms-new-forum-post-page-send-button").style.display=
"none";a.querySelector(".bearcms-new-forum-post-page-send-button-waiting").style.display="inline-block";a.querySelector(".bearcms-new-forum-post-page-text").setAttribute("readonly","readonly")},onFormResponseReceived:function(a){a=a.target;a.querySelector(".bearcms-new-forum-post-page-send-button").style.display="inline-block";a.querySelector(".bearcms-new-forum-post-page-send-button-waiting").style.display="none";a.querySelector(".bearcms-new-forum-post-page-text").removeAttribute("readonly")}}}();