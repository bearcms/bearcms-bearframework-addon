/*
 * Bear CMS addon for Bear Framework
 * https://bearcms.com/
 * Copyright (c) 2016 Amplilabs Ltd.
 * Free to use under the MIT license.
 */
var bearCMS=bearCMS||{};
"undefined"===typeof bearCMS.elementsLazyLoad&&(bearCMS.elementsLazyLoad=function(){var h="",k=function(a,c){var d=[];d.serverData=c;try{"undefined"!==typeof bp&&"undefined"!==typeof bp.riverEditor&&"undefined"!==typeof bp.riverEditor.disableInteractions&&bp.riverEditor.disableInteractions()}catch(b){}var e=document.createElement("div");e.className="bearcms-text-element";e.innerHTML=h;a.appendChild(e);ivoPetkov.bearFrameworkAddons.serverRequests.send("bearcms-elements-load-more",d,function(b){e.parentNode.removeChild(e);
b=JSON.parse(b);html5DOMDocument.insert(b.content,[a,"beforeEnd"]);0<b.editorContent.length&&html5DOMDocument.insert(b.editorContent);try{"undefined"!==typeof bp&&"undefined"!==typeof bp.riverEditor&&"undefined"!==typeof bp.riverEditor.enableInteractions&&bp.riverEditor.enableInteractions()}catch(p){}0<b.nextLazyLoadData.length&&(a.setAttribute("data-bearcms-elements-lazy-load",b.nextLazyLoadData),f=!0)})},n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
function(a){window.setTimeout(a,1E3/60)},f=!0,l=function(){if(f){f=!1;for(var a=document.querySelectorAll("[data-bearcms-elements-lazy-load]"),c=0;c<a.length;c++){var d=a[c];if(-1E3<window.innerHeight-d.getBoundingClientRect().bottom){var e=d.getAttribute("data-bearcms-elements-lazy-load");d.removeAttribute("data-bearcms-elements-lazy-load");k(d,e)}}}n.call(null,l)},g=function(){f=!0},m=!1;return{load:k,initialize:function(a){if(!m){m=!0;var c=window.setInterval(function(){"ivoPetkov"!==typeof bp&&
"undefined"!==typeof ivoPetkov.bearFrameworkAddons&&"undefined"!==typeof ivoPetkov.bearFrameworkAddons.serverRequests&&(window.addEventListener("resize",g),window.addEventListener("scroll",g),window.addEventListener("load",g),l(),window.clearInterval(c))},100);h=a[0]}}}}());