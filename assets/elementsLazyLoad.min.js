/*
 * Bear CMS addon for Bear Framework
 * https://bearcms.com/
 * Copyright (c) Amplilabs Ltd.
 * Free to use under the MIT license.
 */
var bearCMS=bearCMS||{};
bearCMS.elementsLazyLoad=bearCMS.elementsLazyLoad||function(){var h="",k=function(a,c){var b=[];b.serverData=c;try{"undefined"!==typeof bp&&"undefined"!==typeof bp.riverEditor&&"undefined"!==typeof bp.riverEditor.disableInteractions&&bp.riverEditor.disableInteractions()}catch(p){}var d=document.createElement("div");d.className="bearcms-text-element";d.innerHTML=h;a.appendChild(d);clientShortcuts.get("serverRequests").then(function(c){c.send("bearcms-elements-load-more",b).then(function(c){clientShortcuts.get("-bearcms-html5domdocument").then(function(b){d.parentNode.removeChild(d);var e=
JSON.parse(c);b.insert(e.content,[a,"beforeEnd"]);0<e.editorContent.length&&b.insert(e.editorContent);try{"undefined"!==typeof bp&&"undefined"!==typeof bp.riverEditor&&"undefined"!==typeof bp.riverEditor.enableInteractions&&bp.riverEditor.enableInteractions()}catch(q){}0<e.nextLazyLoadData.length&&(a.setAttribute("data-bearcms-elements-lazy-load",e.nextLazyLoadData),f=!0)})})})},n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,
1E3/60)},f=!0,l=function(){if(f){f=!1;for(var a=document.querySelectorAll("[data-bearcms-elements-lazy-load]"),c=0;c<a.length;c++){var b=a[c];if(-1E3<window.innerHeight-b.getBoundingClientRect().bottom){var d=b.getAttribute("data-bearcms-elements-lazy-load");b.removeAttribute("data-bearcms-elements-lazy-load");k(b,d)}}}n.call(null,l)},g=function(){f=!0},m=!1;return{load:k,initialize:function(a){m||(m=!0,h=a[0],window.addEventListener("resize",g),window.addEventListener("scroll",g),window.addEventListener("load",
g),l())}}}();